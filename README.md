# üè≠ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏

[![Python](https://img.shields.io/badge/Python-3.13-blue.svg)](https://www.python.org/)
[![Django](https://img.shields.io/badge/Django-4.2-green.svg)](https://www.djangoproject.com/)
[![DRF](https://img.shields.io/badge/DRF-3.14-red.svg)](https://www.django-rest-framework.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-10+-blue.svg)](https://www.postgresql.org/)

–û–Ω–ª–∞–π–Ω –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç—å—é —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏ —Å REST API –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏:

1. **–ó–∞–≤–æ–¥—ã (—É—Ä–æ–≤–µ–Ω—å 0)** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏
2. **–†–æ–∑–Ω–∏—á–Ω—ã–µ —Å–µ—Ç–∏ (—É—Ä–æ–≤–µ–Ω—å 1+)** - –∫—Ä—É–ø–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Ç–∏
3. **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–∏ (—É—Ä–æ–≤–µ–Ω—å 1+)** - —á–∞—Å—Ç–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü—ã

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º —É—Ä–æ–≤–Ω–µ–π  
‚úÖ REST API —Å –ø–æ–ª–Ω—ã–º CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º  
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–µ, –≥–æ—Ä–æ–¥—É –∏ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º  
‚úÖ –ó–∞—â–∏—Ç–∞ –ø–æ–ª—è "–ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å" –æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ API  
‚úÖ –£–¥–æ–±–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger/ReDoc)  
‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏  
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP8 –∏ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Django  

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Python 3.13, Django 4.2
- **API**: Django REST Framework 3.14
- **–ë–î**: PostgreSQL 10+
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: drf-yasg (Swagger/OpenAPI)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: pytest, pytest-django, factory-boy
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: flake8, black, isort

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
electronics_network/
‚îú‚îÄ‚îÄ src/                              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ electronics_network/          # –ì–ª–∞–≤–Ω—ã–π Django –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ urls.py                  # –ì–ª–∞–≤–Ω—ã–µ URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wsgi.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ asgi.py
‚îÇ   ‚îú‚îÄ‚îÄ network/                      # Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py                # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ serializers.py           # DRF —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views.py                 # API –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ urls.py                  # URL –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filters.py               # –§–∏–ª—å—Ç—Ä—ã –¥–ª—è API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ permissions.py           # –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/              # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ manage.py                    # Django management
‚îÇ   ‚îî‚îÄ‚îÄ setup_db.py                  # –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/                            # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îÇ   ‚îú‚îÄ‚îÄ unit/                        # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_models.py
‚îÇ   ‚îî‚îÄ‚îÄ integration/                 # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ test_api.py
‚îú‚îÄ‚îÄ .env.example                      # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                        # Git ignore —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ requirements.txt                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ pytest.ini                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ setup.cfg                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è flake8/isort
‚îî‚îÄ‚îÄ README.md                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.13+
- PostgreSQL 10+
- Git

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <URL_–≤–∞—à–µ–≥–æ_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd electronics_network
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ PostgreSQL (–∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –û–°)
psql -U postgres

# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE electronics_network_db;

# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
CREATE USER electronics_user WITH PASSWORD 'your_password';
ALTER ROLE electronics_user SET client_encoding TO 'utf8';
ALTER ROLE electronics_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE electronics_user SET timezone TO 'Europe/Moscow';
GRANT ALL PRIVILEGES ON DATABASE electronics_network_db TO electronics_user;

# –í—ã–π–¥–∏—Ç–µ –∏–∑ psql
\q
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
# - SECRET_KEY (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π!)
# - DB_PASSWORD (–≤–∞—à –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL)
# - –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è SECRET_KEY:**
```python
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

### –®–∞–≥ 6: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
cd src
python manage.py makemigrations
python manage.py migrate
```

### –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
python setup_db.py
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ª–æ–≥–∏–Ω: `admin`, –ø–∞—Ä–æ–ª—å: `admin123`)
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è API (–ª–æ–≥–∏–Ω: `employee`, –ø–∞—Ä–æ–ª—å: `employee123`)
- –¢–µ—Å—Ç–æ–≤—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏ —Å –∑–∞–≤–æ–¥–∞–º–∏, —Å–µ—Ç—è–º–∏ –∏ –ò–ü
- –ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### –®–∞–≥ 8: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
python manage.py runserver
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

### –î–æ—Å—Ç—É–ø–Ω—ã–µ URL

- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: http://localhost:8000/admin/
- **API**: http://localhost:8000/api/
- **Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/swagger/
- **ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/redoc/

## üìö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

API —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:

1. **Basic Authentication** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Swagger/Postman
2. **Session Authentication** - –¥–ª—è –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–∞

**–í–∞–∂–Ω–æ**: –î–æ—Å—Ç—É–ø –∫ API –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ **–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** (`is_active=True`).

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

#### –ó–≤–µ–Ω—å—è —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏

```
GET    /api/network-nodes/              # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–≤–µ–Ω—å–µ–≤
POST   /api/network-nodes/              # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∑–≤–µ–Ω–æ
GET    /api/network-nodes/{id}/         # –î–µ—Ç–∞–ª–∏ –∑–≤–µ–Ω–∞
PUT    /api/network-nodes/{id}/         # –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
PATCH  /api/network-nodes/{id}/         # –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
DELETE /api/network-nodes/{id}/         # –£–¥–∞–ª–∏—Ç—å –∑–≤–µ–Ω–æ
GET    /api/network-nodes/statistics/   # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–µ—Ç–∏
POST   /api/network-nodes/{id}/clear_debt/  # –û—á–∏—Å—Ç–∏—Ç—å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å
```

#### –ü—Ä–æ–¥—É–∫—Ç—ã

```
GET    /api/products/                   # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
POST   /api/products/                   # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç
GET    /api/products/{id}/              # –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–∞
PUT    /api/products/{id}/              # –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
PATCH  /api/products/{id}/              # –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
DELETE /api/products/{id}/              # –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

**–§–∏–ª—å—Ç—Ä—ã –¥–ª—è –∑–≤–µ–Ω—å–µ–≤ —Å–µ—Ç–∏:**
```
?country=–†–æ—Å—Å–∏—è                         # –ü–æ —Å—Ç—Ä–∞–Ω–µ (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
?city=–ú–æ—Å–∫–≤–∞                           # –ü–æ –≥–æ—Ä–æ–¥—É
?node_type=FACTORY                     # –ü–æ —Ç–∏–ø—É (FACTORY/RETAIL/IE)
?hierarchy_level=1                     # –ü–æ —É—Ä–æ–≤–Ω—é –∏–µ—Ä–∞—Ä—Ö–∏–∏
?has_supplier=true                     # –°/–±–µ–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
?has_debt=true                         # –° –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é
?debt_min=1000&debt_max=100000        # –ü–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–æ–ª–≥–∞
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET "http://localhost:8000/api/network-nodes/?country=–†–æ—Å—Å–∏—è&has_debt=true" \
  -H "Authorization: Basic ZW1wbG95ZWU6ZW1wbG95ZWUxMjM="
```

### –í–∞–∂–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ü–æ–ª–µ "debt"

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û**: –ü–æ–ª–µ `debt` (–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å) **–ù–ï–õ–¨–ó–Ø** –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–µ PUT/PATCH –∑–∞–ø—Ä–æ—Å—ã!

```json
// ‚ùå –≠—Ç–æ –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É 400
PATCH /api/network-nodes/1/
{
  "debt": "0.00"
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—á–∏—Å—Ç–∏—Ç—å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å:**
```bash
POST /api/network-nodes/1/clear_debt/
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –ø–æ–º–æ—â—å—é –º–∞—Å—Å–æ–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd src
pytest
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞

```bash
pytest --cov=network --cov-report=html
```

HTML –æ—Ç—á–µ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `htmlcov/index.html`

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
pytest tests/unit/

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/integration/

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/unit/test_models.py

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/unit/test_models.py::TestNetworkNodeModel::test_create_factory_node
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PEP8 —Å –ø–æ–º–æ—â—å—é flake8
flake8 src/

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é black
black src/

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
isort src/
```

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è –∏–µ—Ä–∞—Ä—Ö–∏–∏

–£—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞:

```python
def save(self, *args, **kwargs):
    if self.supplier is None:
        self.hierarchy_level = 0  # –ó–∞–≤–æ–¥
    else:
        self.hierarchy_level = self.supplier.hierarchy_level + 1
    super().save(*args, **kwargs)
```

### 2. –ó–∞—â–∏—Ç–∞ –ø–æ–ª—è "debt" –æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –∏ view:

```python
# –í —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–µ
read_only_fields = ['id', 'debt']

# –í view
def update(self, request, *args, **kwargs):
    if 'debt' in request.data:
        return Response({'error': '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ debt –∑–∞–ø—Ä–µ—â–µ–Ω–æ'}, 
                       status=400)
    return super().update(request, *args, **kwargs)
```

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `select_related` –∏ `prefetch_related` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è N+1 –ø—Ä–æ–±–ª–µ–º—ã:

```python
def get_queryset(self):
    queryset = super().get_queryset()
    if self.action == 'retrieve':
        queryset = queryset.select_related('supplier')
        queryset = queryset.prefetch_related('products')
    return queryset
```

### 4. Admin Action –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–≥–∞

```python
@admin.action(description='–û—á–∏—Å—Ç–∏—Ç—å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å')
def clear_debt(self, request, queryset):
    updated_count = queryset.update(debt=0.00)
    self.message_user(request, f'–û—á–∏—â–µ–Ω–æ {updated_count} –∑–∞–ø–∏—Å–µ–π')
```

### 5. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å API:

```python
class IsActiveEmployee(permissions.BasePermission):
    def has_permission(self, request, view):
        return bool(
            request.user and
            request.user.is_authenticated and
            request.user.is_active
        )
```

## üìù –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### NetworkNode (–ó–≤–µ–Ω–æ —Å–µ—Ç–∏)

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —É–∑–µ–ª –≤ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| name | CharField | –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ |
| node_type | CharField | –¢–∏–ø (FACTORY/RETAIL/IE) |
| email | EmailField | Email |
| country | CharField | –°—Ç—Ä–∞–Ω–∞ |
| city | CharField | –ì–æ—Ä–æ–¥ (—Å –∏–Ω–¥–µ–∫—Å–æ–º) |
| street | CharField | –£–ª–∏—Ü–∞ |
| house_number | CharField | –ù–æ–º–µ—Ä –¥–æ–º–∞ |
| supplier | ForeignKey | –ü–æ—Å—Ç–∞–≤—â–∏–∫ (—Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–µ–±—è) |
| hierarchy_level | PositiveSmallIntegerField | –£—Ä–æ–≤–µ–Ω—å (0-N) |
| debt | DecimalField | –ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å |
| created_at | DateTimeField | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | DateTimeField | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

### Product (–ü—Ä–æ–¥—É–∫—Ç)

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| network_node | ForeignKey | –ó–≤–µ–Ω–æ —Å–µ—Ç–∏ |
| name | CharField | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ |
| model | CharField | –ú–æ–¥–µ–ª—å |
| release_date | DateField | –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ –Ω–∞ —Ä—ã–Ω–æ–∫ |

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

–ü—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –°–ª–µ–¥—É–π—Ç–µ PEP8
2. –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
3. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é flake8 –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã / TODO

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Excel/CSV
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—è—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∏–µ—Ä–∞—Ä—Ö–∏–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.